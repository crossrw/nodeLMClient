[![node](https://img.shields.io/node/v/lmclient.svg?style=flat-square)](https://nodejs.org)
[![npm](https://img.shields.io/npm/v/lmclient.svg?style=flat-square)](https://www.npmjs.com/package/lmclient)
[![npm bundle size](https://img.shields.io/bundlephobia/min/lmclient.svg?style=flat-square)](https://www.npmjs.com/package/lmclient)
[![npm module downloads](http://img.shields.io/npm/dt/lmclient.svg?style=flat-square)](https://www.npmjs.com/package/lmclient)
[![Codacy Badge](https://api.codacy.com/project/badge/Grade/d1954134bb304c5599e8b3fa30553e97)](https://www.codacy.com/app/crossrw/nodeLMClient?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=crossrw/nodeLMClient&amp;utm_campaign=Badge_Grade)
[![license](https://img.shields.io/npm/l/lmclient.svg?style=flat-square)](https://opensource.org/licenses/MIT)

# Клиент SCADA системы LanMon для Node.js

## Назначение

Библиотека предназначена для организации подключения к серверу SCADA системы LanMon из программ написанных на языке js.

Для выполнения необходим Node.js версии 6.17.0 или более новый.

Более подробное описание SCADA системы LanMon можно получить на [сайте МНПП "Сатурн"](https://www.mnppsaturn.ru/?topic_id=3&good_id=184).

Основные функции библиотеки:

* подключение к серверу системы
* поддержка типов учетной записи "опрос" и "клиент"
* автоматическое восстанвление подключения при обрывах или ошибках
* автоматическая проверка канала связи с сервером
* создание каналов со всеми поддерживаемыми сервером типами данных, включая массивы
* поддержка всех типов атрибутов каналов
* поддержка установки значения свойства **quality**
* фильтрация значений каналов с типом ```VT_R4``` и ```VT_R8``` с использованием атрибута ```ATTR_PERCENTDB```
* поддержка передачи и получения команд управления
* автоматическое преобразование кодировки значений каналов типа ```VT_STRING``` из кодировки CP1251 в UTF-8 и обратно
* преообразование типа данных ```VT_DATE``` в объект js ```Date()``` и обратно с использованием информации о часовом поясе сервера

Библиотека поддерживает работу с сервером LanMon начиная с его версии 4.12.

Библиотека не содержит внешних зависимостей.

## Установка

```
$ npm install lmclient
```

{{>main}}

## Примеры использования

Примеры испоьзования библиотеки для типов учетной записи "опрос" и "клиент" приведены в файлах **testOpros.js** и **testClient.js** соответственно.

## Существующие ограничения

* Поддержка только каналов второго типа
* Не реализована возможность изменения значений атрибутов каналов

## Текущий статус

Весь заявленный функционал протестирован на больших нагрузках и работает. Дальнейшие планы:

* оптимизация затрат памяти и загрузки процессора
* добавление не реализованных функций
* добавление поддержки каналов первого типа (далекие планы)

## Обратная связь

Замечания и предложения отправляйте на адрес lanmon@mnppsaturn.ru или непосредственно в **Issues/Pull requests**.

* * *
&copy; 2019 ООО "МНПП Сатурн"
